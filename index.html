<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Créateur de lien contact</title>
<style>
  body { font-family: Arial,sans-serif; max-width:480px; margin:2rem auto; padding:1rem; }
  label { display:block; margin-top:1rem; font-weight:bold; }
  input { width: 100%; padding:0.5rem; margin-top:0.25rem; font-size:1rem; }
  button { margin-top:1.5rem; padding:0.75rem 1.5rem; font-size:1rem; background:#007bff; color:#fff; border:none; border-radius:6px; cursor:pointer; }
  #linkContainer { margin-top:2rem; word-break: break-all; }
</style>
</head>
<body>

<h1>Créer un lien contact NFC</h1>

<form id="contactForm">
  <label>Nom complet :<input type="text" id="name" required placeholder="Jean Dupont"></label>
  <label>Fonction :<input type="text" id="name" required placeholder="Fonction"></label>
  <label>Téléphone :<input type="tel" id="phone" required placeholder="+33123456789"></label>
  <label>Email :<input type="email" id="email" required placeholder="jean.dupont@mail.com"></label>
  <label>Site Web<input type="email" id="email" required placeholder="www.site_web.com"></label>
  
  
  <button type="submit">Créer le lien contact</button>
</form>

<div id="linkContainer" style="display:none;">
  <p>Copiez ce lien et encodez-le dans votre carte NFC :</p>
  <a id="generatedLink" href="#" target="_blank"></a>
</div>

<script>
  const form = document.getElementById('contactForm');
  const linkContainer = document.getElementById('linkContainer');
  const generatedLink = document.getElementById('generatedLink');

  form.addEventListener('submit', e => {
    e.preventDefault();
    const name = encodeURIComponent(form.name.value.trim());
    const fonction = encodeURIComponent(form.fonction.value.trim());
    const phone = encodeURIComponent(form.phone.value.trim());
    const email = encodeURIComponent(form.email.value.trim());
    const siteweb = encodeURIComponent(form.siteweb.value.trim());

    const data = JSON.stringify({name, fonction, phone, email, siteweb});
    // Encodage en base64 URL safe
    const b64data = btoa(data).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');

    // URL vers la page contact.html avec paramètre data
    const url = `${location.origin}/contact.html?data=${b64data}`;

    generatedLink.href = url;
    generatedLink.textContent = url;
    linkContainer.style.display = 'block';
  });
</script>

</body>
</html>

